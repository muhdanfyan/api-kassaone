# ğŸ“Š Finance Dashboard - Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND (React + TypeScript)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FinanceDashboard â”‚  â”‚  Dashboard.tsx   â”‚  â”‚   Sidebar.tsx   â”‚  â”‚
â”‚  â”‚     .tsx         â”‚  â”‚ (Finance Cards)  â”‚  â”‚  (Role Menu)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                     â”‚                                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                                                 â”‚                   â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                         â”‚ dashboard-finance.service.ts   â”‚          â”‚
â”‚                         â”‚ - getSummary()                 â”‚          â”‚
â”‚                         â”‚ - getMonthlyData()             â”‚          â”‚
â”‚                         â”‚ - getRecentTransactions()      â”‚          â”‚
â”‚                         â”‚ - getBreakdown()               â”‚          â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ HTTP Request
                                          â”‚ Authorization: Bearer {token}
                                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LARAVEL BACKEND (PHP)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    routes/api.php                            â”‚  â”‚
â”‚  â”‚  Route::middleware(['auth:sanctum', 'role:Admin,Bendahara']) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                      â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚           â”‚                  â”‚                  â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Authentication   â”‚  â”‚  CheckRole    â”‚  â”‚FinanceControllerâ”‚      â”‚
â”‚  â”‚  (Sanctum)       â”‚  â”‚  Middleware   â”‚  â”‚                â”‚       â”‚
â”‚  â”‚                  â”‚  â”‚               â”‚  â”‚  - getSummary()â”‚       â”‚
â”‚  â”‚ âœ… Token Valid   â”‚  â”‚ âœ… Admin or   â”‚  â”‚  - getMonthly()â”‚       â”‚
â”‚  â”‚ âœ… User Active   â”‚  â”‚    Bendahara  â”‚  â”‚  - getRecent() â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  - getBreakdown()â”‚     â”‚
â”‚                                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                     â”‚                â”‚
â”‚                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚                                           â”‚  Query Builder     â”‚     â”‚
â”‚                                           â”‚  (SQL Safe)        â”‚     â”‚
â”‚                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                     â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                                      â”‚ SQL Query
                                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DATABASE (MySQL)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ savings_transactionsâ”‚  â”‚   expenses   â”‚  â”‚  savings_types   â”‚   â”‚
â”‚  â”‚                     â”‚  â”‚              â”‚  â”‚                  â”‚   â”‚
â”‚  â”‚ - id                â”‚  â”‚ - id         â”‚  â”‚ - id             â”‚   â”‚
â”‚  â”‚ - member_id         â”‚  â”‚ - account_id â”‚  â”‚ - name           â”‚   â”‚
â”‚  â”‚ - savings_type_id   â”‚  â”‚ - amount     â”‚  â”‚ - account_type   â”‚   â”‚
â”‚  â”‚ - amount            â”‚  â”‚ - expense_   â”‚  â”‚   (pokok/wajib/  â”‚   â”‚
â”‚  â”‚ - transaction_date  â”‚  â”‚   date       â”‚  â”‚    sukarela)     â”‚   â”‚
â”‚  â”‚ - status            â”‚  â”‚ - descriptionâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚   (approved/        â”‚  â”‚ - receipt_   â”‚                         â”‚
â”‚  â”‚    pending)         â”‚  â”‚   number     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ - transaction_type  â”‚  â”‚ - created_by â”‚  â”‚    accounts      â”‚   â”‚
â”‚  â”‚   (deposit/         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚   â”‚
â”‚  â”‚    withdrawal)      â”‚                    â”‚ - id             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ - code           â”‚   â”‚
â”‚                                             â”‚ - name           â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ - description    â”‚   â”‚
â”‚  â”‚      members        â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚                     â”‚                                           â”‚
â”‚  â”‚ - id                â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ - full_name         â”‚                    â”‚      users       â”‚   â”‚
â”‚  â”‚ - username          â”‚                    â”‚                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ - id             â”‚   â”‚
â”‚                                             â”‚ - role_id        â”‚   â”‚
â”‚                                             â”‚ - full_name      â”‚   â”‚
â”‚                                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Sequence

### 1ï¸âƒ£ User Opens Finance Dashboard

```
User (Browser)
  â”‚
  â”‚ 1. Navigate to /finance
  â”‚
  â–¼
React Router
  â”‚
  â”‚ 2. Check role (Frontend)
  â”‚
  â–¼
FinanceDashboard.tsx
  â”‚
  â”‚ 3. useEffect() â†’ Load data
  â”‚
  â–¼
dashboard-finance.service.ts
  â”‚
  â”‚ 4. GET /api/finance/summary
  â”‚    Headers: { Authorization: Bearer {token} }
  â”‚
  â–¼
Laravel Routes
  â”‚
  â”‚ 5. Middleware: auth:sanctum
  â”‚
  â–¼
CheckRole Middleware
  â”‚
  â”‚ 6. Verify role = Admin or Bendahara
  â”‚
  â–¼
FinanceController::getSummary()
  â”‚
  â”‚ 7. Query Database
  â”‚    - Total Kas = Î£ pemasukan - Î£ pengeluaran
  â”‚    - Pemasukan Bulan Ini = Î£ deposits this month
  â”‚    - Pengeluaran Bulan Ini = Î£ expenses this month
  â”‚
  â–¼
MySQL Database
  â”‚
  â”‚ 8. Execute queries
  â”‚    - savings_transactions JOIN savings_types
  â”‚    - expenses JOIN accounts
  â”‚
  â–¼
FinanceController
  â”‚
  â”‚ 9. Return JSON response
  â”‚    { success: true, data: {...} }
  â”‚
  â–¼
dashboard-finance.service.ts
  â”‚
  â”‚ 10. Parse response
  â”‚
  â–¼
FinanceDashboard.tsx
  â”‚
  â”‚ 11. Update state
  â”‚     setSummary(data)
  â”‚
  â–¼
UI Components
  â”‚
  â”‚ 12. Render cards with data
  â”‚     - Total Kas: Rp 50,000,000
  â”‚     - Pemasukan: Rp 10,000,000
  â”‚     - Pengeluaran: Rp 3,000,000
  â”‚     - Laba/Rugi: Rp 7,000,000
  â”‚
  â–¼
User sees dashboard! âœ…
```

---

## ğŸ” Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LAYER 1: Frontend                 â”‚
â”‚  âœ… Hide menu items for non-Admin/Bendaharaâ”‚
â”‚  âœ… Redirect if unauthorized                â”‚
â”‚  âš ï¸  NOT SECURE (can be bypassed)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LAYER 2: Authentication             â”‚
â”‚  âœ… Sanctum Token Validation                â”‚
â”‚  âœ… Check token not expired                 â”‚
â”‚  âœ… Verify user exists and active           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        LAYER 3: Authorization               â”‚
â”‚  âœ… CheckRole Middleware                    â”‚
â”‚  âœ… Verify user.role.name in allowed roles  â”‚
â”‚  âœ… Return 403 if not authorized            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       LAYER 4: Input Validation             â”‚
â”‚  âœ… Validate query parameters               â”‚
â”‚  âœ… Check date formats                      â”‚
â”‚  âœ… Limit range checks                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LAYER 5: SQL Injection              â”‚
â”‚  âœ… Query Builder (not raw SQL)             â”‚
â”‚  âœ… Parameter binding                       â”‚
â”‚  âœ… No string concatenation                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
            âœ… SECURE ACCESS
```

---

## ğŸ’° Calculation Logic

### Total Kas
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     TOTAL KAS CALCULATION           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Pemasukan (All Time)               â”‚
â”‚  â”œâ”€ Simpanan Pokok                  â”‚
â”‚  â”œâ”€ Simpanan Wajib                  â”‚
â”‚  â””â”€ Simpanan Sukarela               â”‚
â”‚                                     â”‚
â”‚  MINUS                              â”‚
â”‚                                     â”‚
â”‚  Pengeluaran (All Time)             â”‚
â”‚  â”œâ”€ Operasional                     â”‚
â”‚  â”œâ”€ Konsumsi                        â”‚
â”‚  â””â”€ Transportasi                    â”‚
â”‚                                     â”‚
â”‚  EQUALS                             â”‚
â”‚                                     â”‚
â”‚  Total Kas = 50,000,000             â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Monthly Laba/Rugi
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LABA/RUGI BULAN INI               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Pemasukan Desember 2024            â”‚
â”‚  â””â”€ 10,000,000                      â”‚
â”‚                                     â”‚
â”‚  Pengeluaran Desember 2024          â”‚
â”‚  â””â”€ 3,000,000                       â”‚
â”‚                                     â”‚
â”‚  Laba/Rugi = 10M - 3M               â”‚
â”‚            = 7,000,000 (Surplus)    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š API Response Format

### Success Response
```json
{
  "success": true,
  "message": "Operation successful",
  "data": {
    // Response data here
  }
}
```

### Error Response (500)
```json
{
  "success": false,
  "message": "Failed to retrieve data",
  "error": "Detailed error message"
}
```

### Authorization Error (403)
```json
{
  "success": false,
  "message": "Forbidden. You do not have permission to access this resource.",
  "required_roles": ["Admin", "Bendahara"],
  "your_role": "Anggota"
}
```

### Validation Error (422)
```json
{
  "success": false,
  "message": "Validation failed",
  "errors": {
    "start_date": ["The start date field is required."],
    "end_date": ["The end date must be after or equal to start date."]
  }
}
```

---

## ğŸ¯ Frontend â†’ Backend Mapping

| Frontend Service Method | Backend Endpoint | Controller Method |
|------------------------|------------------|-------------------|
| `financeService.getSummary()` | `GET /api/finance/summary` | `FinanceController::getSummary()` |
| `financeService.getMonthlyData(6)` | `GET /api/finance/monthly?months=6` | `FinanceController::getMonthlyData()` |
| `financeService.getRecentTransactions(10)` | `GET /api/finance/transactions/recent?limit=10` | `FinanceController::getRecentTransactions()` |
| `financeService.getBreakdown(start, end)` | `GET /api/finance/breakdown?start_date=...&end_date=...` | `FinanceController::getBreakdown()` |

---

## ğŸ—„ï¸ Database Relations

```
users
  â””â”€ hasOne: role
  
members
  â””â”€ hasMany: savings_transactions

savings_types
  â””â”€ hasMany: savings_transactions
  
savings_transactions
  â”œâ”€ belongsTo: member
  â””â”€ belongsTo: savings_type

accounts
  â””â”€ hasMany: expenses
  
expenses
  â”œâ”€ belongsTo: account
  â””â”€ belongsTo: user (created_by)
```

---

## ğŸš€ Deployment Flow

```
1. Development (Local)
   â”œâ”€ Copy files with SETUP.ps1
   â”œâ”€ Test with PowerShell scripts
   â””â”€ Verify with SQL queries
   
2. Staging
   â”œâ”€ Deploy to staging server
   â”œâ”€ Update .env (database credentials)
   â”œâ”€ Run migrations
   â”œâ”€ Seed test data
   â””â”€ Run automated tests
   
3. Production
   â”œâ”€ Deploy to production server
   â”œâ”€ Update .env (production settings)
   â”œâ”€ Clear caches (config, route, view)
   â”œâ”€ Enable maintenance mode
   â”œâ”€ Deploy
   â”œâ”€ Disable maintenance mode
   â””â”€ Monitor logs
```

---

**Last Updated:** December 14, 2024  
**Architecture:** Microservices (Frontend â†” API â†” Database)  
**Authentication:** JWT (Laravel Sanctum)  
**Authorization:** Role-Based Access Control (RBAC)
